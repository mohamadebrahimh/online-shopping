@model Businessdevweb.Areas.Administrator.Models.SaveAsImage
@{

    var category = (Businessdevweb.Models.ProductCategory)ViewBag.ProductCategory;
    ViewBag.Title = "بارگذاری تصویر";
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
}
<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">
        <div class="mdl-grid mdl-color--grey-50">
            
            @using (Html.BeginForm("ImageUpload", null, method: FormMethod.Post, htmlAttributes: new { @enctype = "multipart/form-data" }))
            {
                @Html.AntiForgeryToken()
                @Html.Hidden("ReturnIdUrl",category.Id)
                <div class="mdl-grid">
                    <div class="mdl-cell mdl-cell--12-col ">
                        @Html.ValidationSummary(true, "", new { @class = "mdl-color-text--red" })
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--12-col ">
                        @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "mdl-textfield__label ", @for = "Title" })

                        @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "mdl-textfield__input", @required = "" } })

                        @Html.ValidationMessageFor(model => model.Title, "", new { @class = "mdl-textfield__error" })
                    </div>

                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--12-col ">
                        @Html.LabelFor(model => model.Alt, htmlAttributes: new { @class = "mdl-textfield__label ", @for = "Alt" })

                        @Html.EditorFor(model => model.Alt, new { htmlAttributes = new { @class = "mdl-textfield__input", @required = "" } })

                        @Html.ValidationMessageFor(model => model.Alt, "", new { @class = "mdl-textfield__error" })
                    </div>
                    <div class="mdl-textfield mdl-js-textfield ">
                        @Html.Label("", htmlAttributes: new { @class = "mdl-textfield__label ", @for = "file" })


                        <input title="انتخاب تصاویر" class="mdl-textfield__input" type="file" id="file" name="File" required accept="image/*">

                      
                    </div>
                    <div class="mdl-cell mdl-cell--12-col">
                        <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">بارگذاری</button>
                        <a href='@(Url.Action("index","Products"))' class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">انصراف</a>
                    </div>
                </div>
            }
            @foreach (var item in category.SelectedImages)
            {
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-grid">
                        <div class="mdl-cell mdl-cell--6-col">
                            <dl>
                                <dt>
                                    @Html.DisplayNameFor(m=>m.Title)
                                </dt>
                                <dd>@item.Image.Title</dd>
                                <dt>
                                    @Html.DisplayNameFor(m=>m.Alt)
                                </dt>
                                <dd>@item.Image.Alt</dd>
                            </dl>
                        </div>

                        <div class="mdl-cell mdl-cell--6-col" style="">
                            <div style="position:absolute;z-index:2;display:block;top:inherit;padding:10px;margin-right:10px">
                                <a href='@(Url.Action("EditImageFile",new { id = item.Image.Id,returnIdUrl=category.Id }))' title="ویرایش"
                                   class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--raised mdl-button--accent ">
                                    <i class="material-icons">edit</i>
                                </a>
                                @if (!item.IsDefault)
                                {
                                    <a href='@(Url.Action("DeleteImageFile", new { id = item.Image.Id }))' title="حذف تصویر"
                                       class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--raised mdl-button--accent ">
                                        <i class="material-icons">delete</i>
                                    </a>}
                            </div>
                            <img src="@(item.Image.Path+"phone/"+item.Image.Name+item.Image.Ext)" style="height:auto;width:100%" alt="@item.Image.Alt" />
                        </div>
                    </div>

                </div>

            }

        </div>

    </div>
</div>