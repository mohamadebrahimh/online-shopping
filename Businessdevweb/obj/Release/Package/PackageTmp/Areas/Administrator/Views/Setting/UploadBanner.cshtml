@model Businessdevweb.Models.Image
@{
    ViewBag.Title = "بارگذاری تصاویر بنر";
    var Banner = (Businessdevweb.Models.BannerSlider)ViewBag.BannerSlider;
    
    Layout = "~/Areas/Administrator/Views/Shared/_Layout.cshtml";
}
<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">
        <div class="mdl-grid mdl-color--grey-50">
            <table class="mdl-cell mdl-cell--12-col mdl-data-table">
                <thead>
                    <tr>
                        <th>صفحه وب ضمیمه شده</th>
                        <th>صفحه نمایش بنر </th>
                        <th>تعداد تصاویر آپلود شده</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            @Banner.Page.Title
                        </td>
                       
                        <td>
                            @if (Banner.IsPage)
                            {
                                <span>@Banner.DisplayedPage.Title</span>

                            }
                            @if (Banner.Setting != null)
                            {
                                <span> و </span>
                                if (Banner.Setting.IsHome)
                                {
                                    <span>تنظیمات اصلی</span>
                                }
                                else if (Banner.Setting.IsProductPage)
                                {
                                    <span>تنظیمات محصولات</span>
                                }
                            }
                        </td>
                        <td>@Banner.SelectedImages.Count</td>
                    </tr>
                </tbody>
            </table>
@using (Html.BeginForm("UploadBanner", null, method: FormMethod.Post, htmlAttributes: new { @enctype = "multipart/form-data" }))
{ 
    @Html.AntiForgeryToken()
    <div class="mdl-grid">
        <div class="mdl-cell mdl-cell--12-col mdl-typography--text-center ">
            @Html.ValidationSummary(true, "", new { @class = "mdl-color-text--red" })
        </div>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--12-col ">
                    @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "mdl-textfield__label ", @for = "Title" })

                    @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "mdl-textfield__input", @required="" } })

                    @Html.ValidationMessageFor(model => model.Title, "", new { @class = "mdl-textfield__error" })
                </div>

                <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--12-col " >
                    @Html.LabelFor(model => model.Alt, htmlAttributes: new { @class = "mdl-textfield__label ", @for = "Alt" })

                    @Html.EditorFor(model => model.Alt, new { htmlAttributes = new { @class = "mdl-textfield__input" , @required = "" } })

                    @Html.ValidationMessageFor(model => model.Alt, "", new { @class = "mdl-textfield__error" })
                </div>
                <div class="mdl-textfield mdl-js-textfield ">
                    @Html.Label("", htmlAttributes: new { @class = "mdl-textfield__label ", @for = "file" })

                
                        <input title="انتخاب تصاویر" class="mdl-textfield__input" type="file" id="file" name="file" required accept="image/*">
                    

                </div>
                <div class="mdl-cell mdl-cell--12-col">
                    <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">بارگذاری</button>
                    <a href='@(Url.Action("DeleteBanner",new { id = Banner.Id ,returnIdUrl=(Banner.Setting==null)?Banner.DisplayedPageId:Banner.SettingId}))' class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">انصراف</a>
                </div>
            </div>
}
            @foreach (var item in Banner.SelectedImages)
            {
                <div class="mdl-cell mdl-cell--12-col">
                    <div class="mdl-grid">
                        <div class="mdl-cell mdl-cell--6-col">
                            <dl>
                                <dt>
                                    @Html.DisplayName(item.Image.Title)
                                </dt>
                                <dd>@item.Image.Title</dd>
                                <dt>
                                    @Html.DisplayName(item.Image.Alt)
                                </dt>
                                <dd>@item.Image.Alt</dd>
                            </dl>
                        </div>

                        <div class="mdl-cell mdl-cell--6-col" style="">
                            <div style="position:absolute;z-index:2;display:block;top:inherit;padding:10px;margin-right:10px">
                                <a href='@(Url.Action("EditBannerFile",new { id = item.Image.Id }))' title="ویرایش"
                                   class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--raised mdl-button--accent ">
                                    <i class="material-icons">edit</i>
                                </a>
                                @if (!item.IsDefault) {
                                <a href='@(Url.Action("DeleteBannerFile", new { id = item.Image.Id }))' title="حذف تصویر"
                                   class="mdl-button mdl-js-button mdl-button--icon mdl-js-ripple-effect mdl-button--raised mdl-button--accent ">
                                    <i class="material-icons">delete</i>
                                </a>}
                            </div>
                            <img src="@(item.Image.Path+"phone/"+item.Image.Name+item.Image.Ext)" style="height:auto;width:100%" alt="@item.Image.Alt" />
                        </div>
                    </div>

                </div>

            }

        </div>

    </div>
</div>